<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <!-- Mejor soporte en iPhone (notch/safe-area) -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Menú — Empanadas Caseras</title>
  <meta name="description" content="Ordena empanadas y bebestibles por WhatsApp con un clic.">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Favicon (logo de empanadas) -->
  <link rel="icon" type="image/jpeg" href="empanadas_caseras.jpg">
  <style>
    html{ -webkit-text-size-adjust:100%; } /* evita zoom tipográfico automático en iOS */
    :root{
      --bg:#0b0b0b;--bg2:#151515;--card:#222;--text:#fff;
      --muted:#d6d6d6;--border:rgba(255,255,255,.10);
      --accent:#fff; /* títulos en blanco alto contraste */
    }
    *{box-sizing:border-box}
    body{
      background:linear-gradient(180deg,var(--bg) 0%, var(--bg2) 100%);
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      /* respeta zonas seguras del iPhone */
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      padding-bottom: calc(env(safe-area-inset-bottom) + 8px);
    }
    .container{max-width:880px;margin:18px auto;padding:16px}
    /* evita scroll horizontal en móviles */
    body, .container { overflow-x:hidden; }
    .header{display:flex;gap:12px;align-items:center}
    .hero-img{width:96px;height:96px;border-radius:12px;overflow:hidden;flex-shrink:0;border:1px solid var(--border)}
    .hero-img img{width:100%;height:100%;object-fit:cover;display:block}
    h1{margin:0;font-size:22px}
    p.lead{margin:6px 0 0;color:#eee}
    .menu-item{display:flex;gap:18px;align-items:center;padding:16px 0;border-bottom:1px dashed var(--border)}
    .item-thumb{width:80px;height:80px;border-radius:12px;overflow:hidden;border:1px solid var(--border);flex-shrink:0}
    .item-thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .item-info{flex:1}
    .item-info h3{
     margin:0;
     font-size:20px;
     font-weight:800;
     color:var(--accent);
     letter-spacing:.2px;
     text-shadow:0 1px 0 rgba(0,0,0,.4);
   }
   .item-info p{margin:4px 0 0;color:#efefef;font-size:15px;line-height:1.4}
    .options{display:flex;flex-direction:column;gap:10px;margin-top:6px}
    .option-row{
      display:flex;align-items:center;gap:10px;flex-wrap:wrap;
    }
    .option-label{font-size:16px;min-width:100px;color:#fff}
    .controls{display:flex;gap:8px;align-items:center;flex:1 1 auto}
    .qty{
      width:64px;text-align:center;border-radius:8px;padding:10px;
      background:rgba(255,255,255,0.04);border:1px solid var(--border);
      color:var(--text);outline:none;font-size:16px;font-weight:600;
    }
    button.icon{
      background:transparent;border:1px solid var(--border);
      padding:8px 12px;border-radius:10px;color:var(--text);
      cursor:pointer;line-height:1;font-weight:700;font-size:18px;
    }
    button.icon:focus-visible,.qty:focus-visible{outline:2px solid #25D366; outline-offset:2px}
    .option-price{font-size:16px;color:#fff;font-weight:700;letter-spacing:.2px;margin-left:auto}
    .card{background:var(--card);border-radius:14px;padding:14px;margin-top:14px;box-shadow:0 6px 24px rgba(0,0,0,.6)}
    .summary{display:flex;justify-content:space-between;align-items:center;padding-top:12px}
    .total{font-weight:800;font-size:22px;color:#fff}
    .wa-btn{display:inline-block;margin-top:12px;padding:12px 16px;border-radius:10px;text-align:center;text-decoration:none;background:#25D366;color:#021202;font-weight:800}
    .small{font-size:13px;color:var(--muted)}
    .delivery-row{display:flex;justify-content:space-between;align-items:center;padding:10px 6px;border-bottom:1px dashed var(--border)}
    .delivery-label,.delivery-price{font-size:16px;color:#fff}
    .delivery-price{font-weight:700;color:#fff}
    .delivery-off{color:#fff;font-weight:700} /* aunque esté en $0, se verá blanco */
    footer{text-align:center;margin-top:16px;color:#bdbdbd;font-size:13px}
    @media(max-width:560px){
      .header{flex-direction:row;gap:10px}
      .menu-item{flex-direction:column;align-items:flex-start}
      .item-thumb{width:64px;height:64px}
      .item-info h3{font-size:19px}
      .option-label{font-size:17px;min-width:0;flex:1 0 auto}
      .option-price{font-size:18px}
      .qty{width:56px;padding:10px}
      button.icon{min-width:44px;min-height:44px}
    }
    /* color del switch en modo oscuro */
    .form-switch .form-check-input:checked{
      background-color:#25D366;
      border-color:#25D366;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="hero-img">
        <img src="empanadas_caseras.jpg" alt="Logo Empanadas Caseras">
      </div>
      <div>
        <h1>Empanadas Caseras</h1>
        <p class="lead">Elige, suma y ordena por WhatsApp. ¡Fácil y rápido!</p>
      </div>
    </div>

    <div class="card">
      <!-- Empanada de Pino -->
      <div class="menu-item">
        <div class="item-thumb">
          <img src="empanadas_caseras.jpg" alt="Empanada de Pino">
        </div>
        <div class="item-info">
          <h3>Empanada de Pino</h3>
          <p>Carne, cebolla, huevo y aceituna.</p>
          <div class="options">
            <div class="option-row">
              <span class="option-label">Unidad</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar pino" onclick="changeQty('pino',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_pino" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar pino" onclick="changeQty('pino',1)">+</button>
              </div>
              <span class="option-price">$3.000</span>
            </div>
            <div class="option-row">
              <span class="option-label">Docena</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar docena pino" onclick="changeQty('docena_pino',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_docena_pino" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar docena pino" onclick="changeQty('docena_pino',1)">+</button>
              </div>
              <span class="option-price">$29.000</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Empanada de Queso -->
      <div class="menu-item">
        <div class="item-thumb">
          <img src="empanadas_caseras.jpg" alt="Empanada de Queso">
        </div>
        <div class="item-info">
          <h3>Empanada de Queso</h3>
          <p>Queso fundido en masa dorada.</p>
          <div class="options">
            <div class="option-row">
              <span class="option-label">Unidad</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar queso" onclick="changeQty('queso',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_queso" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar queso" onclick="changeQty('queso',1)">+</button>
              </div>
              <span class="option-price">$3.000</span>
            </div>
            <div class="option-row">
              <span class="option-label">Docena</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar docena queso" onclick="changeQty('docena_queso',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_docena_queso" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar docena queso" onclick="changeQty('docena_queso',1)">+</button>
              </div>
              <span class="option-price">$29.000</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Empanada Napolitana -->
      <div class="menu-item">
        <div class="item-thumb">
          <img src="empanadas_caseras.jpg" alt="Empanada Napolitana">
        </div>
        <div class="item-info">
          <h3>Empanada Napolitana</h3>
          <p>Jamón, tomate y queso.</p>
          <div class="options">
            <div class="option-row">
              <span class="option-label">Unidad</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar napolitana" onclick="changeQty('napolitana',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_napolitana" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar napolitana" onclick="changeQty('napolitana',1)">+</button>
              </div>
              <span class="option-price">$3.000</span>
            </div>
            <div class="option-row">
              <span class="option-label">Docena</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar docena napolitana" onclick="changeQty('docena_napolitana',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_docena_napolitana" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar docena napolitana" onclick="changeQty('docena_napolitana',1)">+</button>
              </div>
              <span class="option-price">$29.000</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Terremoto 1L -->
      <div class="menu-item">
        <div class="item-thumb">
          <img id="img_terremoto" src="terremoto.jpg" alt="Terremoto 1L">
        </div>
        <div class="item-info">
          <h3>Terremoto 1L</h3>
          <p>Bebida típica chilena (vino pipeño, helado de piña).</p>
          <div class="options">
            <div class="option-row">
              <span class="option-label">Cantidad</span>
              <div class="controls">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Restar terremoto" onclick="changeQty('terremoto',-1)">−</button>
                <input type="number" min="0" value="0" class="qty" id="qty_terremoto" inputmode="numeric">
                <button class="icon btn btn-outline-light btn-sm" aria-label="Sumar terremoto" onclick="changeQty('terremoto',1)">+</button>
              </div>
              <span class="option-price">$5.000</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Delivery -->
      <div class="delivery-row">
        <div class="d-flex align-items-center gap-2">
          <span class="delivery-label">Delivery</span>
          <div class="form-check form-switch m-0">
            <input class="form-check-input" type="checkbox" id="deliveryCheck" aria-label="Activar delivery">
          </div>
        </div>
        <span class="delivery-price delivery-off" id="deliveryPrice">$0</span>
      </div>
      <div class="small">Activa el switch para agregar delivery.</div>

      <div class="summary">
         <span class="total">Total: <span id="totalAmount">$0</span></span>
         <a href="#" class="wa-btn" id="whatsappBtn" target="_blank" rel="noopener">Ordenar por WhatsApp</a>
       </div>
    </div>

    <footer>Pedidos al (+569 420 75446) — ¡Gracias por preferirnos!</footer>
  </div>

  <script>
    // Configuración
    const phone = "56942075446";
    const prices = {
      pino: 3000, queso: 3000, napolitana: 3000,
      docena_pino: 29000, docena_queso: 29000, docena_napolitana: 29000,
      terremoto: 5000, delivery: 2000
    };

    // Utilidades
    const CLP = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP', maximumFractionDigits: 0 });
    const q = id => document.getElementById(id);
    const formatCurrency = n => CLP.format(n);

    // Lógica
    function changeQty(type, delta){
      const el = q('qty_' + type);
      if(!el) return;
      const next = Math.max(0, (parseInt(el.value) || 0) + delta);
      el.value = next;
      updateTotal();
    }

    function readInt(id){
      return parseInt(q(id)?.value) || 0;
    }

    function updateTotal(){
      const qtyPino = readInt('qty_pino');
      const qtyQueso = readInt('qty_queso');
      const qtyNapolitana = readInt('qty_napolitana');
      const qtyDocenaPino = readInt('qty_docena_pino');
      const qtyDocenaQueso = readInt('qty_docena_queso');
      const qtyDocenaNapolitana = readInt('qty_docena_napolitana');
      const qtyTerremoto = readInt('qty_terremoto');
      const deliveryChecked = q('deliveryCheck')?.checked;
      const delivery = deliveryChecked ? prices.delivery : 0;

      const total =
        qtyPino * prices.pino +
        qtyQueso * prices.queso +
        qtyNapolitana * prices.napolitana +
        qtyDocenaPino * prices.docena_pino +
        qtyDocenaQueso * prices.docena_queso +
        qtyDocenaNapolitana * prices.docena_napolitana +
        qtyTerremoto * prices.terremoto +
        delivery;

      // Total visible
      q('totalAmount').textContent = formatCurrency(total);

      // Mostrar precio de delivery dinámico
      const delEl = q('deliveryPrice');
      if (delEl){
        delEl.textContent = formatCurrency(delivery);
        delEl.classList.toggle('delivery-off', !deliveryChecked);
      }

      buildWhatsAppLink({ qtyPino, qtyQueso, qtyNapolitana, qtyDocenaPino, qtyDocenaQueso, qtyDocenaNapolitana, qtyTerremoto, delivery, total });
    }

    function buildWhatsAppLink(d){
      let msg = "Hola! Quiero pedir:\n";
      if (d.qtyPino>0) msg += `- ${d.qtyPino} Empanada(s) de Pino\n`;
      if (d.qtyQueso>0) msg += `- ${d.qtyQueso} Empanada(s) de Queso\n`;
      if (d.qtyNapolitana>0) msg += `- ${d.qtyNapolitana} Empanada(s) Napolitana\n`;
      if (d.qtyDocenaPino>0) msg += `- ${d.qtyDocenaPino} Docena(s) de Pino\n`;
      if (d.qtyDocenaQueso>0) msg += `- ${d.qtyDocenaQueso} Docena(s) de Queso\n`;
      if (d.qtyDocenaNapolitana>0) msg += `- ${d.qtyDocenaNapolitana} Docena(s) Napolitana\n`;
      if (d.qtyTerremoto>0) msg += `- ${d.qtyTerremoto} Terremoto(s) 1L\n`;
      if (d.delivery>0) msg += `- Con delivery\n`;
      msg += `Total: ${formatCurrency(d.total)}`;
      const wa = q('whatsappBtn');
      if (wa) wa.href = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
    }

    // Listeners
    ['pino','queso','napolitana','docena_pino','docena_queso','docena_napolitana','terremoto'].forEach(id=>{
      const el = q('qty_'+id);
      if (el){
        el.addEventListener('input', updateTotal);
        el.addEventListener('change', updateTotal);
      }
    });
    q('deliveryCheck')?.addEventListener('change', updateTotal);

    updateTotal();
  </script>
</body>
</html>
